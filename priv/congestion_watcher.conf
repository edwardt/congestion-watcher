####----------------------------------------------------------------------
### Copyright (c) 2007-2010 Gemini Mobile Technologies, Inc.  All rights reserved.
### 
### Licensed under the Apache License, Version 2.0 (the "License");
### you may not use this file except in compliance with the License.
### You may obtain a copy of the License at
### 
###     http://www.apache.org/licenses/LICENSE-2.0
### 
### Unless required by applicable law or agreed to in writing, software
### distributed under the License is distributed on an "AS IS" BASIS,
### WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
### See the License for the specific language governing permissions and
### limitations under the License.
###
### File    : congestion_watcher.conf
### Purpose : congestion watcher configuration file
###----------------------------------------------------------------------

#
# Format:
# Each item description to watch is specified on 1 line. An item description
# is comprised of 9 different comma separated fields. No spaces are allowed 
# around the commas. The following describes each field.
#
# 1: WHAT TO WATCH - The field is has two colon separated fields.
#    The first may be either "mnesia" or "gen_server". The second is a table or
#    server that can answer a size query.
# 2: INTERVAL - to check this item for congestion. This is specified in millis. 
# 3: ENABLED - true if item is enabled, false to disable monitoring.
# 4: LOW WATER MARK - If congested the item will return to the uncongested state
#    once the size falls below this mark.
# 5: WARN WATER MARK - A warning will be written to the log file once the size of
#    the item reaches this size. No further warning will be issued unless the size
#    falls below the low water mark or rises above the high water mark.
# 6: HIGH WATER MARK - Once the high water mark is reached, the item is considered
#    to be congested. A restriction message will be sent to the RESTRICT_WHO field.
# 7: RESTRICT WHO - The process which needs to receive the restriction messages.
# 8: RESTRICT MSEC - Number of millis the RESTRICT WHO process should impose a 
#    restriction for before assuming it can continue again.
# 9: RESTRICT WHAT - A colon separated list of items to restrict.

mnesia:ppg_pushin_fsmstate,5000,true,5000,10000,20000,ticket_maker,10000,mail_in_receive_push_P0:mail_in_receive_push_P1
mnesia:ppg_pushretrieval_fsmstate,5000,true,5000,10000,20000,ticket_maker,10000,mail_in_receive_push_P0:mail_in_receive_push_P1
mnesia:ppg_pushout_fsmstate,5000,true,5000,10000,20000,ticket_maker,10000,mail_in_receive_push_P0:mail_in_receive_push_P1
mnesia:ppg_resultdelete_fsmstate,5000,true,5000,10000,20000,ticket_maker,10000,mail_in_receive_push_P0:mail_in_receive_push_P1
mnesia:ppg_alertnotify_fsmstate,5000,true,5000,10000,20000,ticket_maker,10000,mail_in_receive_push_P0:mail_in_receive_push_P1

gen_server:ppg_msisdn_pushout_brokerpool0_broker,5000,true,5000,10000,20000,ticket_maker,10000,mail_in_receive_push_P0:mail_in_receive_push_P1
gen_server:ppg_msisdn_pushout_brokerpool1_broker,5000,true,5000,10000,20000,ticket_maker,10000,mail_in_receive_push_P0:mail_in_receive_push_P1
gen_server:ppg_msisdn_resultdelete_brokerpool0_broker,5000,true,5000,10000,20000,ticket_maker,10000,mail_in_receive_push_P0:mail_in_receive_push_P1
gen_server:ppg_msisdn_resultdelete_brokerpool1_broker,5000,true,5000,10000,20000,ticket_maker,10000,mail_in_receive_push_P0:mail_in_receive_push_P1
gen_server:ppg_provider_alertnotify_brokerpool0_broker,5000,true,5000,10000,20000,ticket_maker,10000,mail_in_receive_push_P0:mail_in_receive_push_P1
gen_server:ppg_provider_alertnotify_brokerpool1_broker,5000,true,5000,10000,20000,ticket_maker,10000,mail_in_receive_push_P0:mail_in_receive_push_P1

apply:congestion_util:process_count,5000,true,25,27,29,undefined,0,undefined
